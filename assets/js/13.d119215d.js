(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{310:function(t,s,a){t.exports=a.p+"assets/img/12.5c4e51ca.png"},311:function(t,s,a){t.exports=a.p+"assets/img/13.d8ae3b54.jpg"},382:function(t,s,a){"use strict";a.r(s);var e=a(30),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"安全防范"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安全防范"}},[t._v("#")]),t._v(" 安全防范")]),t._v(" "),e("p"),e("div",{staticClass:"table-of-contents"},[e("ul",[e("li",[e("a",{attrs:{href:"#xss-跨域脚本攻击"}},[t._v("XSS 跨域脚本攻击")]),e("ul",[e("li",[e("a",{attrs:{href:"#反射性-xss"}},[t._v("反射性 XSS")])]),e("li",[e("a",{attrs:{href:"#存储型攻击"}},[t._v("存储型攻击")])]),e("li",[e("a",{attrs:{href:"#dom-型攻击"}},[t._v("DOM 型攻击")])]),e("li",[e("a",{attrs:{href:"#xss-防御"}},[t._v("XSS 防御")])])])]),e("li",[e("a",{attrs:{href:"#csp-内容安全策略"}},[t._v("CSP 内容安全策略")])]),e("li",[e("a",{attrs:{href:"#csrf-跨域请求伪造"}},[t._v("CSRF 跨域请求伪造")]),e("ul",[e("li",[e("a",{attrs:{href:"#csrf-防御"}},[t._v("CSRF 防御")])])])]),e("li",[e("a",{attrs:{href:"#点击劫持"}},[t._v("点击劫持")]),e("ul",[e("li",[e("a",{attrs:{href:"#防御手段"}},[t._v("防御手段")])])])]),e("li",[e("a",{attrs:{href:"#中间人攻击"}},[t._v("中间人攻击")])])])]),e("p"),t._v(" "),e("h2",{attrs:{id:"xss-跨域脚本攻击"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#xss-跨域脚本攻击"}},[t._v("#")]),t._v(" XSS 跨域脚本攻击")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("XSS 攻击简单来说就是攻击者想尽一切办法把可执行的代码嵌入到页面中，以达到非法窃取某些数据或者破坏的目的。")])]),t._v(" "),e("p",[t._v("依据情景的不同，XSS 攻击可分为几种类型。")]),t._v(" "),e("h3",{attrs:{id:"反射性-xss"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#反射性-xss"}},[t._v("#")]),t._v(" 反射性 XSS")]),t._v(" "),e("p",[t._v("反射性 XSS 也叫做非持久性 XSS，是指发生请求时，XSS 代码会出现在请求的 URL 中，作为参数提交到服务器，服务器接受并响应。响应结果中包含 XSS 代码，最后通过浏览器进行解析并执行，一个反射性 XSS 可能如下所示")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("ajax")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("url")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("split")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'?'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1500")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" url "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://www.baidu.com/getUserInfo?name=<script>alert(document.cookie)<\/script>'")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("ajax")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  document"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("insertAdjacentHTML")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'beforeend'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("split")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'='")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br")])]),e("h3",{attrs:{id:"存储型攻击"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#存储型攻击"}},[t._v("#")]),t._v(" 存储型攻击")]),t._v(" "),e("p",[t._v("存储型 XSS 也叫"),e("code",[t._v("持久性 XSS")]),t._v("，它的主要攻击方式是将代码发送到服务器，最常见的存储型 XSS 攻击就是评论或者浏览攻击，一个存储型 XSS 可能如下图所示：")]),t._v(" "),e("p",[e("img",{attrs:{src:a(310),alt:"储存性XSS攻击"}})]),t._v(" "),e("h3",{attrs:{id:"dom-型攻击"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dom-型攻击"}},[t._v("#")]),t._v(" DOM 型攻击")]),t._v(" "),e("p",[t._v("将攻击脚本写在 URL 中，诱导用户点击该 URL，如果 URL 被解析，那么攻击脚本就会被运行。和前两者的差别主要在于 DOM 型攻击不经过服务端")]),t._v(" "),e("h3",{attrs:{id:"xss-防御"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#xss-防御"}},[t._v("#")]),t._v(" XSS 防御")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("ol",[e("li",[e("strong",[t._v("输入检查")]),t._v("：将由用户输入的内容，进行必要的标签例如"),e("code",[t._v("<script>")]),t._v("、"),e("code",[t._v("<iframe>")]),t._v("转义，包括"),e("code",[t._v("<")]),t._v("、"),e("code",[t._v(">")]),t._v("、"),e("code",[t._v("/")]),t._v("等, 另外过滤一些危险属性或者方法，例如"),e("code",[t._v("onerror")]),t._v("方法、"),e("code",[t._v("href")]),t._v("属性、"),e("code",[t._v("src")]),t._v("属性等")]),t._v(" "),e("li",[e("strong",[t._v("设置 httpOnly")]),t._v("：在服务端设置"),e("code",[t._v("cookit")]),t._v("属性"),e("code",[t._v("httpOnly")]),t._v("防止客户端通过"),e("code",[t._v("document.cookie")]),t._v("读取")]),t._v(" "),e("li",[e("strong",[t._v("开启 CSP")]),t._v("：即开启白名单，可阻止白名单以外的资源加载和运行")])])]),t._v(" "),e("h2",{attrs:{id:"csp-内容安全策略"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#csp-内容安全策略"}},[t._v("#")]),t._v(" CSP 内容安全策略")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("CSP 内容安全策略本质上来说是建立白名单机制，告诉浏览器哪些外部资源可以加载和执行，我们只需要配置，拦截主要交给浏览器。")])]),t._v(" "),e("p",[t._v("通常有两种方法设置 CSP：")]),t._v(" "),e("ol",[e("li",[t._v("通过设置"),e("code",[t._v("HTTP Header")]),t._v("的"),e("code",[t._v("Content-Security-Policy")])]),t._v(" "),e("li",[t._v("通过"),e("code",[t._v("meta")]),t._v("标签来设置，例如："),e("code",[t._v('<meta http-equiv="Content-Security-Policy">')])])]),t._v(" "),e("h2",{attrs:{id:"csrf-跨域请求伪造"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#csrf-跨域请求伪造"}},[t._v("#")]),t._v(" CSRF 跨域请求伪造")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("CSRF 攻击原理上是攻击者伪造一个后端请求地址，诱导用户进行点击，如果用户在已登录的情况下点击了这个危险链接，则后端服务器会认为是用户在正常访问，攻击者从而可以从请求中拿到一些信息，进而进行攻击。")])]),t._v(" "),e("h3",{attrs:{id:"csrf-防御"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#csrf-防御"}},[t._v("#")]),t._v(" CSRF 防御")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("CSRF 防御有如下几种方式：")]),t._v(" "),e("ol",[e("li",[e("code",[t._v("Get")]),t._v("请求不对数据进行修改")]),t._v(" "),e("li",[e("strong",[t._v("设置 SameSite")]),t._v("：不让第三方网站访问用户的"),e("code",[t._v("Cookie")]),t._v("，可以通过"),e("code",[t._v("Cookie")]),t._v("的"),e("code",[t._v("SameSite")]),t._v("属性")]),t._v(" "),e("li",[e("strong",[t._v("验证 Token")]),t._v("：在进行请求时，附加"),e("code",[t._v("refer")]),t._v("验证和"),e("code",[t._v("token")]),t._v("验证")]),t._v(" "),e("li",[e("strong",[t._v("验证 Referer")]),t._v("：通过验证请求头的 Referer 来验证来源站点，但请求头很容易伪造")]),t._v(" "),e("li",[e("strong",[t._v("阻止第三方网站请求")])])])]),t._v(" "),e("h2",{attrs:{id:"点击劫持"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#点击劫持"}},[t._v("#")]),t._v(" 点击劫持")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("点击劫持是一种视觉欺骗的攻击手段。攻击者将需要攻击的网站通过 iframe 嵌套的方式嵌入自己的网页中，并将 iframe 设置为透明，在页面中透出一个按钮诱导用户点击。")])]),t._v(" "),e("h3",{attrs:{id:"防御手段"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#防御手段"}},[t._v("#")]),t._v(" 防御手段")]),t._v(" "),e("p",[t._v("设置 HTTP 响应头"),e("code",[t._v("X-FRAME-OPTIONS")]),t._v("，它可以设置"),e("code",[t._v("DENY")]),t._v("、"),e("code",[t._v("SAMEORIGIN")]),t._v("、"),e("code",[t._v("ALLOW-FROM")]),t._v("分别表示不允许"),e("code",[t._v("iframe")]),t._v("展示、只允许永远"),e("code",[t._v("iframe")]),t._v("展示、表示页面可以在指定来源的"),e("code",[t._v("iframe")]),t._v("中展示。")]),t._v(" "),e("h2",{attrs:{id:"中间人攻击"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#中间人攻击"}},[t._v("#")]),t._v(" 中间人攻击")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("中间人攻击是攻击方同时与服务端和客户端建立起了连接，并让对方认为连接是安全的，但是实际上整个通信过程都被攻击者控制了。攻击者不仅能获得双方的通信信息，还能修改通信信息。一般来说使用"),e("code",[t._v("HTTPS")]),t._v("协议可以有效防止中间人攻击，但并不是说"),e("code",[t._v("HTTPS")]),t._v("就可以高枕无忧，因为攻击者可以通过某种方式从"),e("code",[t._v("HTTPS")]),t._v("降级到"),e("code",[t._v("HTTP")]),t._v("进行访问。")])]),t._v(" "),e("p",[e("img",{attrs:{src:a(311),alt:"中间人攻击"}})])])}),[],!1,null,null,null);s.default=n.exports}}]);